webpackJsonp([2],{"7jKP":function(t,r){},TwIR:function(t,r){},el11:function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=e("Dd8w"),i=e.n(s),a=e("rdLu"),n=e.n(a),c=e("NYxO"),o=e("XLwt"),d=e.n(o),l={xAxis:{show:!1,data:[]},yAxis:{show:!1},grid:{top:2,left:0,bottom:2,right:2}},h={type:"line",smooth:!0,lineStyle:{width:2,color:"#4264FB",opacity:"1"},animation:!1,itemStyle:{opacity:"0",color:"#fff",borderWidth:0,borderColor:"#fff"}},u={props:{width:Number,height:Number,data:{type:Array,default:[]}},data:function(){return{$chart:null,timer:null}},computed:{chartData:function(){var t=i()({width:130,height:26},l,{series:[],yAxis:i()({},l.yAxis,{min:n.a.min(this.data),max:n.a.max(this.data)})});return t.series.push(i()({},h,{data:this.data})),t}},mounted:function(){var t=this;this.timer=setTimeout(function(){t.$chart=d.a.init(t.$refs.chart),t.$chart.setOption(t.chartData),t.timer=null},200)},watch:{data:function(t){}},destroyed:function(){this.$chart&&this.$chart.clear(),this.timer&&clearTimeout(this.timer)}},v={render:function(){var t=this.$createElement,r=this._self._c||t;return r("div",{staticClass:"mini-chart"},[r("div",{ref:"chart",staticClass:"chart"})])},staticRenderFns:[]};var f=["marketcap","price","volume_24h","change_24h","range"],_={data:function(){return{orderBy:"rank",orderAsc:!0,page:1,limit:100,loading:!1,loaderror:!1,cacheList:[]}},components:{MiniChart:e("VU/8")(u,v,!1,function(t){e("TwIR")},"data-v-bba147dc",null).exports},computed:i()({},Object(c.b)({coinlist:function(t){return t.page.coin.list}}),{list:function(){var t=void 0,r=t=this.coinlist.length===this.cacheList.length?this.cacheList:this.coinlist.map(function(t,r){return i()({rank:r+1,chart:(t.coordinate||[]).map(function(t){return t.price})},t)});switch(this.orderBy){case"rank":r=n.a.sortBy(t,function(t){return t.rank});break;case"name":r=n.a.sortBy(t,function(t,r){return t.name.toLowerCase()});break;case"marketcap":r=n.a.sortBy(t,function(t){return t.marketcap});break;case"price":r=n.a.sortBy(t,function(t){return t.price});break;case"volume_24h":r=n.a.sortBy(t,function(t){return t.volume_24h});break;case"change_24h":r=n.a.sortBy(t,function(t){return t.change_24h});break;case"range":r=n.a.sortBy(t,function(t){var r=n.a.min(t.chart);return n.a.max(t.chart)-r})}return this.orderAsc||(r=r.reverse()),r}}),methods:{load:function(){var t=this;this.loading=!0,this.$store.dispatch("getCoins",{limit:this.limit,page:this.page++}).then(function(){t.loading=!1}).catch(function(){t.loaderror=!0})},setOrder:function(t){this.orderBy===t?this.orderAsc=!this.orderAsc:(this.orderBy=t,this.orderAsc=!f.includes(t))},checkLoad:function(t){this.loading||(this.$refs.loadMore&&this.$refs.loadMore.getBoundingClientRect&&this.$refs.loadMore.getBoundingClientRect()).top-window.innerHeight<1e3&&(this.loading=!0,this.load())}},mounted:function(){this.$store.commit("setNavbar",1),this.$store.commit("setCoin",{list:[]}),this.load(),window.addEventListener("scroll",this.checkLoad),window.dispatchEvent(new Event("scroll"))},destroyed:function(){window.removeEventListener("scroll",this.checkLoad)}},m={render:function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("layout",{attrs:{fullwidth:""}},[e("topbar",{attrs:{slot:"topbar"},slot:"topbar"}),t._v(" "),e("div",{staticClass:"coin-table"},[e("div",{staticClass:"inner"},[e("div",{staticClass:"theader"},[e("div",{staticClass:"col",on:{click:function(r){t.setOrder("rank")}}},[e("div",{staticClass:"btn primary"},[t._v("\n            #\n            "),"rank"===t.orderBy?e("icon",{attrs:{type:t.orderAsc?"sort-asc":"sort-desc"}}):t._e()],1)]),t._v(" "),e("div",{staticClass:"col",on:{click:function(r){t.setOrder("name")}}},[e("div",{staticClass:"btn primary"},[t._v("\n            币种\n            "),"name"===t.orderBy?e("icon",{attrs:{type:t.orderAsc?"sort-asc":"sort-desc"}}):t._e()],1)]),t._v(" "),e("div",{staticClass:"col left",on:{click:function(r){t.setOrder("marketcap")}}},[e("div",{staticClass:"btn primary"},[t._v("\n            市值\n            "),"marketcap"===t.orderBy?e("icon",{attrs:{type:t.orderAsc?"sort-asc":"sort-desc"}}):t._e()],1)]),t._v(" "),e("div",{staticClass:"col left",on:{click:function(r){t.setOrder("price")}}},[e("div",{staticClass:"btn primary"},[t._v("\n            价格\n            "),"price"===t.orderBy?e("icon",{attrs:{type:t.orderAsc?"sort-asc":"sort-desc"}}):t._e()],1)]),t._v(" "),e("div",{staticClass:"col left",on:{click:function(r){t.setOrder("volume_24h")}}},[e("div",{staticClass:"btn primary"},[t._v("\n            成交量(24h)\n            "),"volume_24h"===t.orderBy?e("icon",{attrs:{type:t.orderAsc?"sort-asc":"sort-desc"}}):t._e()],1)]),t._v(" "),e("div",{staticClass:"col",on:{click:function(r){t.setOrder("change_24h")}}},[e("div",{staticClass:"btn primary"},[t._v("\n            涨跌幅(24h)\n            "),"change_24h"===t.orderBy?e("icon",{attrs:{type:t.orderAsc?"sort-asc":"sort-desc"}}):t._e()],1)]),t._v(" "),e("div",{staticClass:"col"},[e("div",{staticClass:"btn primary"},[t._v("\n            近期走势(7d)\n            "),"range"===t.orderBy?e("icon",{attrs:{type:t.orderAsc?"sort-asc":"sort-desc"}}):t._e()],1)])]),t._v(" "),e("div",{staticClass:"tbody"},t._l(t.list,function(r){return e("div",{key:r.id,staticClass:"row item",on:{click:function(e){t.$router.push({path:"/coin/p/"+r.id})}}},[e("div",{staticClass:"col"},[t._v("\n            "+t._s(r.rank)+"\n          ")]),t._v(" "),e("div",{staticClass:"col left"},[e("div",{staticClass:"col-inner"},[e("img",{staticClass:"coin-logo",attrs:{src:r.image,width:"20",height:"20"}}),t._v(" "),e("b",[t._v("\n                "+t._s(r.name)+"\n              ")])])]),t._v(" "),e("div",{staticClass:"col left"},[t._v("\n            "+t._s(t._f("currency")(r.marketcap))+"\n          ")]),t._v(" "),e("div",{staticClass:"col left"},[t._v("\n            "+t._s(t._f("currency")(r.price))+"\n          ")]),t._v(" "),e("div",{staticClass:"col left"},[t._v("\n            "+t._s(t._f("currency")(r.volume_24h))+"\n          ")]),t._v(" "),e("div",{staticClass:"col",class:r.change_24h>=0?"price-up":"price-down"},[t._v("\n            "+t._s(r.change_24h)+"%\n          ")]),t._v(" "),e("div",{staticClass:"col"},[e("mini-chart",{attrs:{data:r.chart}})],1)])})),t._v(" "),t.loaderror?e("loaderror"):t._e(),t._v(" "),t.loading?e("loading"):t._e(),t._v(" "),e("div",{ref:"loadMore"})],1)]),t._v(" "),e("footerBar",{attrs:{slot:"footer"},slot:"footer"})],1)},staticRenderFns:[]};var p=e("VU/8")(_,m,!1,function(t){e("7jKP")},"data-v-597a646e",null);r.default=p.exports}});