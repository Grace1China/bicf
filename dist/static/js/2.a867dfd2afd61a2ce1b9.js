webpackJsonp([2],{SbQB:function(t,r){},TwIR:function(t,r){},el11:function(t,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=s("Dd8w"),e=s.n(i),a=s("rdLu"),n=s.n(a),c=s("NYxO"),o=s("XLwt"),d=s.n(o),l={xAxis:{show:!1,data:[]},yAxis:{show:!1},grid:{top:2,left:0,bottom:2,right:2}},h={type:"line",smooth:!0,lineStyle:{width:2,color:"#4264FB",opacity:"1"},animation:!1,itemStyle:{opacity:"0",color:"#fff",borderWidth:0,borderColor:"#fff"}},u={props:{width:Number,height:Number,data:{type:Array,default:[]}},data:function(){return{$chart:null,timer:null}},computed:{chartData:function(){var t=e()({width:130,height:26},l,{series:[],yAxis:e()({},l.yAxis,{min:n.a.min(this.data),max:n.a.max(this.data)})});return t.series.push(e()({},h,{data:this.data})),t}},mounted:function(){var t=this;this.timer=setTimeout(function(){t.$chart=d.a.init(t.$refs.chart),t.$chart.setOption(t.chartData),t.timer=null},200)},watch:{data:function(t){}},destroyed:function(){this.$chart&&this.$chart.clear(),this.timer&&clearTimeout(this.timer)}},v={render:function(){var t=this.$createElement,r=this._self._c||t;return r("div",{staticClass:"mini-chart"},[r("div",{ref:"chart",staticClass:"chart"})])},staticRenderFns:[]};var _=["marketcap","price","volume_24h","change_24h","range"],m={data:function(){return{orderBy:"rank",orderAsc:!0,page:1,limit:100,loading:!1,cacheList:[]}},components:{MiniChart:s("VU/8")(u,v,!1,function(t){s("TwIR")},"data-v-bba147dc",null).exports},computed:e()({},Object(c.b)({coinlist:function(t){return t.page.coin.list}}),{list:function(){var t=void 0,r=t=this.coinlist.length===this.cacheList.length?this.cacheList:this.coinlist.map(function(t,r){return e()({rank:r+1,chart:(t.coordinate||[]).map(function(t){return t.price})},t)});switch(this.orderBy){case"rank":r=n.a.sortBy(t,function(t){return t.rank});break;case"name":r=n.a.sortBy(t,function(t,r){return t.name.toLowerCase()});break;case"marketcap":r=n.a.sortBy(t,function(t){return t.marketcap});break;case"price":r=n.a.sortBy(t,function(t){return t.price});break;case"volume_24h":r=n.a.sortBy(t,function(t){return t.volume_24h});break;case"change_24h":r=n.a.sortBy(t,function(t){return t.change_24h});break;case"range":r=n.a.sortBy(t,function(t){var r=n.a.min(t.chart);return n.a.max(t.chart)-r})}return this.orderAsc||(r=r.reverse()),r}}),methods:{load:function(){var t=this;this.loading=!0,this.$store.dispatch("getCoins",{limit:this.limit,page:this.page++}).then(function(){t.loading=!1})},setOrder:function(t){this.orderBy===t?this.orderAsc=!this.orderAsc:(this.orderBy=t,this.orderAsc=!_.includes(t))},checkLoad:function(t){this.loading||(this.$refs.loadMore&&this.$refs.loadMore.getBoundingClientRect&&this.$refs.loadMore.getBoundingClientRect()).top-window.innerHeight<1e3&&(this.loading=!0,this.load())}},mounted:function(){this.$store.commit("setNavbar",1),this.$store.commit("setCoin",{list:[]}),this.load(),window.addEventListener("scroll",this.checkLoad),window.dispatchEvent(new Event("scroll"))},destroyed:function(){window.removeEventListener("scroll",this.checkLoad)}},f={render:function(){var t=this,r=t.$createElement,s=t._self._c||r;return s("layout",{attrs:{fullwidth:""}},[s("topbar",{attrs:{slot:"topbar"},slot:"topbar"}),t._v(" "),s("div",{staticClass:"coin-table"},[s("div",{staticClass:"inner"},[s("div",{staticClass:"theader"},[s("div",{staticClass:"col",on:{click:function(r){t.setOrder("rank")}}},[s("div",{staticClass:"btn primary"},[t._v("\n            #\n            "),"rank"===t.orderBy?s("icon",{attrs:{type:t.orderAsc?"sort-asc":"sort-desc"}}):t._e()],1)]),t._v(" "),s("div",{staticClass:"col",on:{click:function(r){t.setOrder("name")}}},[s("div",{staticClass:"btn primary"},[t._v("\n            币种\n            "),"name"===t.orderBy?s("icon",{attrs:{type:t.orderAsc?"sort-asc":"sort-desc"}}):t._e()],1)]),t._v(" "),s("div",{staticClass:"col",on:{click:function(r){t.setOrder("marketcap")}}},[s("div",{staticClass:"btn primary"},[t._v("\n            市值\n            "),"marketcap"===t.orderBy?s("icon",{attrs:{type:t.orderAsc?"sort-asc":"sort-desc"}}):t._e()],1)]),t._v(" "),s("div",{staticClass:"col",on:{click:function(r){t.setOrder("price")}}},[s("div",{staticClass:"btn primary"},[t._v("\n            价格\n            "),"price"===t.orderBy?s("icon",{attrs:{type:t.orderAsc?"sort-asc":"sort-desc"}}):t._e()],1)]),t._v(" "),s("div",{staticClass:"col",on:{click:function(r){t.setOrder("volume_24h")}}},[s("div",{staticClass:"btn primary"},[t._v("\n            成交量(24h)\n            "),"volume_24h"===t.orderBy?s("icon",{attrs:{type:t.orderAsc?"sort-asc":"sort-desc"}}):t._e()],1)]),t._v(" "),s("div",{staticClass:"col",on:{click:function(r){t.setOrder("change_24h")}}},[s("div",{staticClass:"btn primary"},[t._v("\n            涨跌幅(24h)\n            "),"change_24h"===t.orderBy?s("icon",{attrs:{type:t.orderAsc?"sort-asc":"sort-desc"}}):t._e()],1)]),t._v(" "),s("div",{staticClass:"col"},[s("div",{staticClass:"btn primary"},[t._v("\n            近期走势(7d)\n            "),"range"===t.orderBy?s("icon",{attrs:{type:t.orderAsc?"sort-asc":"sort-desc"}}):t._e()],1)])]),t._v(" "),s("div",{staticClass:"tbody"},t._l(t.list,function(r){return s("div",{key:r.id,staticClass:"row item",on:{click:function(s){t.$router.push({path:"/coin/p/"+r.id})}}},[s("div",{staticClass:"col"},[t._v("\n            "+t._s(r.rank)+"\n          ")]),t._v(" "),s("div",{staticClass:"col left"},[s("div",{staticClass:"col-inner"},[s("img",{staticClass:"coin-logo",attrs:{src:r.image,width:"20",height:"20"}}),t._v(" "),s("b",[t._v("\n                "+t._s(r.name)+"\n              ")])])]),t._v(" "),s("div",{staticClass:"col"},[t._v("\n            "+t._s(t._f("currency")(r.marketcap))+"\n          ")]),t._v(" "),s("div",{staticClass:"col"},[t._v("\n            "+t._s(t._f("currency")(r.price))+"\n          ")]),t._v(" "),s("div",{staticClass:"col"},[t._v("\n            "+t._s(t._f("currency")(r.volume_24h))+"\n          ")]),t._v(" "),s("div",{staticClass:"col",class:r.change_24h>=0?"price-up":"price-down"},[t._v("\n            "+t._s(r.change_24h)+"%\n          ")]),t._v(" "),s("div",{staticClass:"col"},[s("mini-chart",{attrs:{data:r.chart}})],1)])})),t._v(" "),t.loading?s("loading"):t._e(),t._v(" "),s("div",{ref:"loadMore"})],1)]),t._v(" "),s("footerBar",{attrs:{slot:"footer"},slot:"footer"})],1)},staticRenderFns:[]};var p=s("VU/8")(m,f,!1,function(t){s("SbQB")},"data-v-3389b1db",null);r.default=p.exports}});